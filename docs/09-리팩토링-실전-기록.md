# ë¦¬íŒ©í† ë§ ì‹¤ì „ ê¸°ë¡

ì´ ë¬¸ì„œëŠ” `App.tsx` ëª¨ë†€ë¦¬ì‹ ì½”ë“œë¥¼ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì›ì¹™ì— ë”°ë¼ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ê²ªì€ **ì‹¤ì œ ë¬¸ì œì **, **í•´ê²° ê³¼ì •**, **ì´ë¡ ì  ê·¼ê±°**ë¥¼ ìƒì„¸í•˜ê²Œ ê¸°ë¡í•œ ê²ƒì…ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [models/cart.ts - ìˆœìˆ˜ í•¨ìˆ˜ ë¶„ë¦¬](#1-modelscartts---ìˆœìˆ˜-í•¨ìˆ˜-ë¶„ë¦¬)
2. [utils/formatter.ts - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë¶„ë¦¬](#2-utilsformatterts---ìœ í‹¸ë¦¬í‹°-í•¨ìˆ˜-ë¶„ë¦¬)
3. [constants/index.ts - ìƒìˆ˜ ë°ì´í„° ë¶„ë¦¬](#3-constantsindexts---ìƒìˆ˜-ë°ì´í„°-ë¶„ë¦¬)
4. [hooks/useDebounce.ts - ë²”ìš© í›… ë¶„ë¦¬](#4-hooksusedebouncets---ë²”ìš©-í›…-ë¶„ë¦¬)
5. [hooks/useProducts.ts - ìƒí’ˆ ë„ë©”ì¸ í›… ë¶„ë¦¬](#5-hooksuseproductsts---ìƒí’ˆ-ë„ë©”ì¸-í›…-ë¶„ë¦¬)
6. [hooks/useCoupons.ts - ì¿ í° ë„ë©”ì¸ í›… ë¶„ë¦¬](#6-hooksusecouponsts---ì¿ í°-ë„ë©”ì¸-í›…-ë¶„ë¦¬)
7. [hooks/useCart.ts - ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ í›… ë¶„ë¦¬](#7-hooksusecartts---ì¥ë°”êµ¬ë‹ˆ-ë„ë©”ì¸-í›…-ë¶„ë¦¬)
8. [hooks/useNotification.ts - ì•Œë¦¼ í›… ë¶„ë¦¬](#8-hooksusenotificationts---ì•Œë¦¼-í›…-ë¶„ë¦¬)
9. [Cross-Cutting Concerns ì²˜ë¦¬](#9-cross-cutting-concerns-ì²˜ë¦¬)
10. [í•µì‹¬ êµí›ˆ](#10-í•µì‹¬-êµí›ˆ)

---

## 1. models/cart.ts - ìˆœìˆ˜ í•¨ìˆ˜ ë¶„ë¦¬

### ë¶„ë¥˜: ğŸ§® ê³„ì‚° (Calculation)

### ëª©í‘œ
App.tsxì— ìˆë˜ ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ **ìˆœìˆ˜ í•¨ìˆ˜**ë¡œ ë¶„ë¦¬

### ë¶„ë¦¬í•œ í•¨ìˆ˜ë“¤
```typescript
// ëª¨ë‘ ìˆœìˆ˜ í•¨ìˆ˜ - ê°™ì€ ì…ë ¥ â†’ í•­ìƒ ê°™ì€ ì¶œë ¥
getMaxApplicableDiscount(item)
calculateItemTotal(item)
calculateCartTotal(cart, selectedCoupon)
getRemainingStock(product, cart)
addItemToCart(cart, product)
removeItemFromCart(cart, productId)
updateCartItemQuantity(cart, productId, quantity)
getTotalItemCount(cart)
canAddToCart(product, cart)
```

### ğŸš¨ ë¬¸ì œ 1: ìˆœìˆ˜ í•¨ìˆ˜ê°€ ì™¸ë¶€ ìƒíƒœì— ì˜ì¡´

**Before (ë¬¸ì œ ì½”ë“œ)**:
```typescript
// App.tsx ë‚´ë¶€
const calculateCartTotal = () => {
  // cartë¥¼ ì§ì ‘ ì°¸ì¡° - ìˆœìˆ˜ í•¨ìˆ˜ê°€ ì•„ë‹˜!
  return cart.reduce((sum, item) => sum + item.price, 0);
};
```

**ë¬¸ì œì **:
- `cart`ê°€ í´ë¡œì €ë¡œ ìº¡ì²˜ë˜ì–´ ì™¸ë¶€ ìƒíƒœì— ì˜ì¡´
- ê°™ì€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ë„ `cart` ìƒíƒœì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¤ë¦„
- í…ŒìŠ¤íŠ¸í•  ë•Œ React ì»´í¬ë„ŒíŠ¸ í™˜ê²½ì´ í•„ìš”í•¨

**After (í•´ê²°)**:
```typescript
// models/cart.ts
export const calculateCartTotal = (
  cart: CartItem[],           // íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
  selectedCoupon: Coupon | null
) => {
  // ëª¨ë“  í•„ìš”í•œ ë°ì´í„°ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
  // ì™¸ë¶€ ìƒíƒœ ì˜ì¡´ ì—†ìŒ
};
```

### ì´ë¡ ì  ê·¼ê±°

**í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ìˆœìˆ˜ í•¨ìˆ˜ ì •ì˜**:
1. ê°™ì€ ì…ë ¥ì— ëŒ€í•´ í•­ìƒ ê°™ì€ ì¶œë ¥
2. ë¶€ì‘ìš©(side effect)ì´ ì—†ìŒ
3. ì™¸ë¶€ ìƒíƒœë¥¼ ì½ê±°ë‚˜ ì“°ì§€ ì•ŠìŒ

**ì™œ ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ê°€?**:
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: React ì—†ì´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ì¬ì‚¬ìš©ì„±**: ì–´ë””ì„œë“  importí•´ì„œ ì‚¬ìš© ê°€ëŠ¥
- **ì˜ˆì¸¡ ê°€ëŠ¥ì„±**: ì…ë ¥ë§Œ ë³´ë©´ ì¶œë ¥ì„ ì˜ˆì¸¡ ê°€ëŠ¥
- **ë³‘ë ¬ ì²˜ë¦¬**: ìƒíƒœ ê³µìœ ê°€ ì—†ì–´ ì•ˆì „

### ğŸš¨ ë¬¸ì œ 2: ê³„ì‚°ê³¼ ì•¡ì…˜ì˜ í˜¼í•©

**Before**:
```typescript
const addToCart = (product) => {
  // ê³„ì‚° (ìˆœìˆ˜)
  const remainingStock = product.stock - currentQuantity;
  const newItem = { product, quantity: 1 };
  
  // ì•¡ì…˜ (ë¶€ì‘ìš©)
  setCart(prev => [...prev, newItem]);
  addNotification("ë‹´ì•˜ìŠµë‹ˆë‹¤");
};
```

**After**:
```typescript
// models/cart.ts - ê³„ì‚°ë§Œ
export const addItemToCart = (cart, product) => {
  const existingItem = cart.find(item => item.product.id === product.id);
  if (existingItem) {
    return cart.map(item =>
      item.product.id === product.id
        ? { ...item, quantity: item.quantity + 1 }
        : item
    );
  }
  return [...cart, { product, quantity: 1 }];
};

// hooks/useCart.ts - ì•¡ì…˜ë§Œ
const addToCart = (product) => {
  setCart(prev => addItemToCart(prev, product)); // ê³„ì‚° í˜¸ì¶œ
  // notificationì€ Appì—ì„œ ì²˜ë¦¬
};
```

### ì´ë¡ ì  ê·¼ê±°

**Grokking Simplicityì˜ í•µì‹¬ ì›ì¹™**:
> "ì•¡ì…˜ ì•ˆì—ì„œ ê³„ì‚°ì„ ì¶”ì¶œí•˜ë¼"

ì•¡ì…˜ì€ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë µì§€ë§Œ, ê³„ì‚°ì€ ì‰½ë‹¤. ë”°ë¼ì„œ:
1. ì•¡ì…˜ ë‚´ì˜ ë¡œì§ì„ ìµœëŒ€í•œ ê³„ì‚°ìœ¼ë¡œ ì¶”ì¶œ
2. ì•¡ì…˜ì€ ìµœì†Œí•œì˜ "ìƒíƒœ ë³€ê²½"ë§Œ ë‹´ë‹¹
3. ê³„ì‚°ì€ ë³„ë„ íŒŒì¼(models/)ë¡œ ë¶„ë¦¬

---

## 2. utils/formatter.ts - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë¶„ë¦¬

### ë¶„ë¥˜: ğŸ§® ê³„ì‚° (Calculation)

### ëª©í‘œ
ë„ë©”ì¸ê³¼ ë¬´ê´€í•œ **ë²”ìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜** ë¶„ë¦¬

### ë¶„ë¦¬í•œ í•¨ìˆ˜ë“¤
```typescript
formatPrice(price: number): string        // "â‚©10,000"
formatPriceKorean(price: number): string  // "1ë§Œì›"
formatPercentage(rate: number): string    // "10%"
```

### ê²°ì • í¬ì¸íŠ¸: models vs utils

**ì§ˆë¬¸**: `formatPrice`ëŠ” modelsì— ë„£ì–´ì•¼ í• ê¹Œ, utilsì— ë„£ì–´ì•¼ í• ê¹Œ?

**íŒë‹¨ ê¸°ì¤€**:
- **models/**: íŠ¹ì • ì—”í‹°í‹°(ì¥ë°”êµ¬ë‹ˆ, ìƒí’ˆ, ì¿ í°)ì— ì¢…ì†ì ì¸ ë¡œì§
- **utils/**: ì–´ë–¤ ë„ë©”ì¸ì—ì„œë“  ì‚¬ìš© ê°€ëŠ¥í•œ ë²”ìš© ë¡œì§

**ê²°ë¡ **: `formatPrice`ëŠ” ì¥ë°”êµ¬ë‹ˆë¿ ì•„ë‹ˆë¼ ìƒí’ˆ ëª©ë¡, ì£¼ë¬¸ ë‚´ì—­ ë“± ì–´ë””ì„œë“  ì‚¬ìš© ê°€ëŠ¥ â†’ **utils/**

### ì´ë¡ ì  ê·¼ê±°

**ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)**:
- ë³€ê²½ì˜ ì´ìœ ê°€ ë‹¤ë¥´ë©´ ë¶„ë¦¬
- ê°€ê²© í¬ë§·íŒ… ê·œì¹™ ë³€ê²½ â‰  í• ì¸ ê³„ì‚° ë¡œì§ ë³€ê²½
- ë”°ë¼ì„œ ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬

---

## 3. constants/index.ts - ìƒìˆ˜ ë°ì´í„° ë¶„ë¦¬

### ë¶„ë¥˜: ğŸ“¦ ë°ì´í„° (Data)

### ëª©í‘œ
í•˜ë“œì½”ë”©ëœ ì´ˆê¸° ë°ì´í„°ë¥¼ **ìƒìˆ˜**ë¡œ ë¶„ë¦¬

### ë¶„ë¦¬í•œ ê²ƒë“¤
```typescript
export interface ProductWithUI extends Product {
  showDiscount: boolean;
}

export const initialProducts: ProductWithUI[] = [...];
export const initialCoupons: Coupon[] = [...];
```

### ì™œ ë°ì´í„°ë¥¼ ë¶„ë¦¬í•˜ëŠ”ê°€?

**Before**:
```typescript
// App.tsx ë‚´ë¶€ì— 1000ì¤„ì§œë¦¬ ìƒí’ˆ ë°ì´í„°ê°€ ìˆìœ¼ë©´...
const App = () => {
  const [products] = useState([
    { id: "1", name: "ìƒí’ˆ1", ... },
    // ... 100ê°œ ìƒí’ˆ
  ]);
};
```

**ë¬¸ì œì **:
- App.tsxê°€ ë¹„ëŒ€í•´ì§
- ë°ì´í„° ìˆ˜ì • ì‹œ App.tsx ì „ì²´ë¥¼ ìˆ˜ì •í•´ì•¼ í•¨
- ë°ì´í„°ì™€ ë¡œì§ì´ ì„ì—¬ìˆìŒ

**After**:
```typescript
// constants/index.ts
export const initialProducts = [...];

// App.tsx
import { initialProducts } from "./constants";
```

### ì´ë¡ ì  ê·¼ê±°

**í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ë°ì´í„°**:
- ë°ì´í„°ëŠ” "ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‚¬ì‹¤"
- ë¶ˆë³€(immutable)ì´ì–´ì•¼ í•¨
- ì½”ë“œ(ê³„ì‚°, ì•¡ì…˜)ì™€ ë¶„ë¦¬ë˜ì–´ì•¼ í•¨

**ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬**:
- "ë¬´ì—‡"(ë°ì´í„°) vs "ì–´ë–»ê²Œ"(ë¡œì§) ë¶„ë¦¬
- ë°ì´í„° ë³€ê²½ ì‹œ constants/ë§Œ ìˆ˜ì •
- ë¡œì§ ë³€ê²½ ì‹œ models/ ë˜ëŠ” hooks/ë§Œ ìˆ˜ì •

---

## 4. hooks/useDebounce.ts - ë²”ìš© í›… ë¶„ë¦¬

### ë¶„ë¥˜: âš¡ ì•¡ì…˜ (Action)

### ëª©í‘œ
ê²€ìƒ‰ì–´ ë””ë°”ìš´ì‹± ë¡œì§ì„ **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í›…**ìœ¼ë¡œ ë¶„ë¦¬

### êµ¬í˜„
```typescript
export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => clearTimeout(timer);
  }, [value, delay]);

  return debouncedValue;
}
```

### ì™œ ì•¡ì…˜ì¸ê°€?

**ì‹œê°„ì— ì˜ì¡´**í•˜ê¸° ë•Œë¬¸:
- `setTimeout` ì‚¬ìš© â†’ í˜¸ì¶œ ì‹œì ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¤ë¦„
- `useEffect` ì‚¬ìš© â†’ React ìƒëª…ì£¼ê¸°ì— ì˜ì¡´
- `useState` ì‚¬ìš© â†’ ë‚´ë¶€ ìƒíƒœ ë³€ê²½

### ê²°ì • í¬ì¸íŠ¸: ë„ë©”ì¸ í›… vs ë²”ìš© í›…

**ì§ˆë¬¸**: useDebounceëŠ” ì–´ë–¤ ì¢…ë¥˜ì˜ í›…ì¸ê°€?

**ë„ë©”ì¸ í›… (useCart, useProducts)**:
- íŠ¹ì • ì—”í‹°í‹°ë¥¼ ë‹¤ë£¸
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨
- ì˜ˆ: `useCart`ëŠ” ì¥ë°”êµ¬ë‹ˆ ì—”í‹°í‹° ê´€ë¦¬

**ë²”ìš© í›… (useDebounce, useLocalStorage)**:
- ë„ë©”ì¸ê³¼ ë¬´ê´€
- ê¸°ìˆ ì  ë¬¸ì œ í•´ê²°
- ì˜ˆ: `useDebounce`ëŠ” ì–´ë–¤ ê°’ì´ë“  ë””ë°”ìš´ì‹± ê°€ëŠ¥

**ê²°ë¡ **: useDebounceëŠ” **ë²”ìš© í›…** â†’ hooks/ í´ë”ì— ë‘ë˜, ë‚˜ì¤‘ì— hooks/common/ìœ¼ë¡œ ë¶„ë¦¬ ê°€ëŠ¥

### ì´ë¡ ì  ê·¼ê±°

**ì¶”ìƒí™”ì˜ ì ì ˆí•œ ìˆ˜ì¤€**:
- ë„ˆë¬´ êµ¬ì²´ì : ê²€ìƒ‰ì–´ë§Œ ë””ë°”ìš´ì‹±í•˜ëŠ” í›…
- ì ì ˆí•¨: ì–´ë–¤ ê°’ì´ë“  ë””ë°”ìš´ì‹±í•˜ëŠ” ì œë„¤ë¦­ í›…
- ë„ˆë¬´ ì¶”ìƒì : ëª¨ë“  ì‹œê°„ ê´€ë ¨ ì‘ì—…ì„ í•˜ëŠ” í›…

---

## 5. hooks/useProducts.ts - ìƒí’ˆ ë„ë©”ì¸ í›… ë¶„ë¦¬

### ë¶„ë¥˜: âš¡ ì•¡ì…˜ (Action)

### ëª©í‘œ
ìƒí’ˆ ê´€ë ¨ **ìƒíƒœì™€ ì•¡ì…˜**ì„ ìº¡ìŠí™”

### êµ¬í˜„
```typescript
export function useProducts() {
  const [products, setProducts] = useState<ProductWithUI[]>(() => {
    // localStorageì—ì„œ ì´ˆê¸°í™”
  });

  useEffect(() => {
    localStorage.setItem("products", JSON.stringify(products));
  }, [products]);

  const addProduct = useCallback(...);
  const updateProduct = useCallback(...);
  const deleteProduct = useCallback(...);

  return { products, addProduct, updateProduct, deleteProduct };
}
```

### ğŸš¨ ë¬¸ì œ: ì¸í„°í˜ì´ìŠ¤ ì¤‘ë³µ ì •ì˜

**Before**:
```typescript
// App.tsx
interface ProductWithUI extends Product {
  showDiscount: boolean;
}

// hooks/useProducts.ts
interface ProductWithUI extends Product {  // ì¤‘ë³µ!
  showDiscount: boolean;
}
```

**ë¬¸ì œì **:
- ê°™ì€ ì¸í„°í˜ì´ìŠ¤ê°€ ë‘ ê³³ì— ì •ì˜ë¨
- í•˜ë‚˜ë¥¼ ìˆ˜ì •í•˜ë©´ ë‹¤ë¥¸ í•˜ë‚˜ë„ ìˆ˜ì •í•´ì•¼ í•¨
- TypeScriptê°€ ë³„ê°œì˜ íƒ€ì…ìœ¼ë¡œ ì¸ì‹í•  ìˆ˜ ìˆìŒ

**After**:
```typescript
// hooks/useProducts.ts
export interface ProductWithUI extends Product {
  showDiscount: boolean;
}

// App.tsx
import { useProducts, ProductWithUI } from "./hooks/useProducts";
```

### ì´ë¡ ì  ê·¼ê±°

**DRY (Don't Repeat Yourself)**:
- ëª¨ë“  ì§€ì‹ì€ ì‹œìŠ¤í…œ ë‚´ì—ì„œ ë‹¨ì¼í•˜ê³  ëª…í™•í•œ í‘œí˜„ì„ ê°€ì ¸ì•¼ í•¨
- ì¸í„°í˜ì´ìŠ¤ëŠ” í•œ ê³³ì—ì„œ ì •ì˜í•˜ê³  export

**Single Source of Truth**:
- ProductWithUIì˜ ì •ì˜ëŠ” useProducts.tsê°€ "ì†Œìœ "
- ë‹¤ë¥¸ ê³³ì—ì„œëŠ” importí•´ì„œ ì‚¬ìš©

---

## 6. hooks/useCoupons.ts - ì¿ í° ë„ë©”ì¸ í›… ë¶„ë¦¬

### ë¶„ë¥˜: âš¡ ì•¡ì…˜ (Action)

### ëª©í‘œ
ì¿ í° ê´€ë ¨ **ìƒíƒœì™€ ì•¡ì…˜**ì„ ìº¡ìŠí™”

### ğŸš¨ ë¬¸ì œ 1: í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ì°¸ì¡°

**ì²˜ìŒ ì‘ì„±í•œ ì½”ë“œ**:
```typescript
export function useCoupons() {
  const [coupons, setCoupons] = useState(...);
  const [selectedCoupon, setSelectedCoupon] = useState(null);

  const applyCoupon = useCallback((coupon) => {
    // ğŸš¨ cartê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ!
    const currentTotal = calculateCartTotal(cart, null);
    
    // ğŸš¨ addNotificationì´ ì •ì˜ë˜ì§€ ì•ŠìŒ!
    addNotification("ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.");
    
    setSelectedCoupon(coupon);
  }, [cart, addNotification]);  // ì˜ì¡´ì„±ë„ ì—†ìŒ
}
```

**ë¬¸ì œì **:
- `cart`ëŠ” useCartì—ì„œ ê´€ë¦¬ â†’ useCouponsì—ì„œ ì ‘ê·¼ ë¶ˆê°€
- `addNotification`ì€ Appì—ì„œ ê´€ë¦¬ â†’ useCouponsì—ì„œ ì ‘ê·¼ ë¶ˆê°€
- í›… ê°„ì˜ ì˜ì¡´ì„± ë¬¸ì œ ë°œìƒ

### ğŸš¨ ë¬¸ì œ 2: selectedCouponì€ ì–´ë””ì— ì†í•˜ëŠ”ê°€?

**ê³ ë¯¼**:
- `selectedCoupon`ì€ ì¿ í° ê´€ë ¨ì´ë‹ˆê¹Œ useCoupons?
- í•˜ì§€ë§Œ `applyCoupon`ì—ì„œ cart ì´ì•¡ì„ ì²´í¬í•´ì•¼ í•¨
- ê·¸ë¦¬ê³  ì£¼ë¬¸ ì™„ë£Œ ì‹œ selectedCouponì„ nullë¡œ ì´ˆê¸°í™”í•´ì•¼ í•¨

**ê²°ë¡ **: selectedCouponì€ **cartì™€ ë” ë°€ì ‘í•˜ê²Œ ê´€ë ¨**ë¨ â†’ useCartë¡œ ì´ë™

### í•´ê²°: ì±…ì„ ì¬ì •ì˜

**useCouponsì˜ ì±…ì„**:
- ì¿ í° ëª©ë¡ CRUDë§Œ ë‹´ë‹¹
- selectedCouponì€ useCartì—ì„œ ê´€ë¦¬

```typescript
// useCoupons - ì¿ í° ëª©ë¡ë§Œ
export function useCoupons() {
  const [coupons, setCoupons] = useState(...);

  const addCoupon = useCallback((newCoupon) => {
    if (coupons.find(c => c.code === newCoupon.code)) {
      return { success: false, message: "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¿ í°" };
    }
    setCoupons(prev => [...prev, newCoupon]);
    return { success: true, message: "ì¿ í° ì¶”ê°€ë¨" };
  }, [coupons]);

  const deleteCoupon = useCallback(...);
  const getCoupon = useCallback(...);

  // selectedCoupon, applyCouponì€ ì—†ìŒ!
  return { coupons, addCoupon, deleteCoupon, getCoupon };
}
```

### ğŸš¨ ë¬¸ì œ 3: Notification ì²˜ë¦¬

**Before (ë¬¸ì œ)**:
```typescript
const addCoupon = (newCoupon) => {
  if (existingCoupon) {
    addNotification("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¿ í°", "error");  // ğŸš¨ addNotificationì´ ì—†ìŒ
    return;
  }
  setCoupons(prev => [...prev, newCoupon]);
  addNotification("ì¿ í° ì¶”ê°€ë¨", "success");
};
```

**í•´ê²°: Result íŒ¨í„´**:
```typescript
// useCoupons.ts - ê²°ê³¼ë§Œ ë°˜í™˜
const addCoupon = (newCoupon): { success: boolean; message: string } => {
  if (existingCoupon) {
    return { success: false, message: "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¿ í°" };
  }
  setCoupons(prev => [...prev, newCoupon]);
  return { success: true, message: "ì¿ í° ì¶”ê°€ë¨" };
};

// App.tsx - notification ì²˜ë¦¬
const handleAddCoupon = (coupon) => {
  const result = addCoupon(coupon);
  addNotification(result.message, result.success ? "success" : "error");
};
```

### ì´ë¡ ì  ê·¼ê±°

**ë‹¨ì¼ ì±…ì„ ì›ì¹™**:
- useCoupons: ì¿ í° CRUDë§Œ
- useCart: ì¥ë°”êµ¬ë‹ˆ + ì¿ í° ì„ íƒ
- App: notification ì²˜ë¦¬

**Result íŒ¨í„´ (í•¨ìˆ˜í˜• ì—ëŸ¬ ì²˜ë¦¬)**:
- ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•Šê³  ê²°ê³¼ ê°ì²´ ë°˜í™˜
- í˜¸ì¶œìê°€ ê²°ê³¼ë¥¼ ë³´ê³  ì²˜ë¦¬ ë°©ë²• ê²°ì •
- ë¶€ì‘ìš©(notification)ì„ í˜¸ì¶œìì—ê²Œ ìœ„ì„

---

## 7. hooks/useCart.ts - ì¥ë°”êµ¬ë‹ˆ ë„ë©”ì¸ í›… ë¶„ë¦¬

### ë¶„ë¥˜: âš¡ ì•¡ì…˜ (Action)

### ëª©í‘œ
ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ **ëª¨ë“  ìƒíƒœì™€ ì•¡ì…˜**ì„ ìº¡ìŠí™”

### ğŸš¨ ë¬¸ì œ 1: products ì˜ì¡´ì„±

**ì²˜ìŒ ì½”ë“œ**:
```typescript
export function useCart() {
  const updateQuantity = (productId, newQuantity) => {
    // ğŸš¨ product.stockì„ ì²´í¬í•´ì•¼ í•˜ëŠ”ë° productsê°€ ì—†ìŒ!
    const product = products.find(p => p.id === productId);
    if (newQuantity > product.stock) { ... }
  };
}
```

**ë¬¸ì œì **:
- `updateQuantity`ì—ì„œ ì¬ê³  ì²´í¬ë¥¼ í•´ì•¼ í•¨
- í•˜ì§€ë§Œ `products`ëŠ” useProductsì—ì„œ ê´€ë¦¬
- useCartì—ì„œ productsì— ì–´ë–»ê²Œ ì ‘ê·¼í•  ê²ƒì¸ê°€?

**í•´ê²° ì˜µì…˜ë“¤**:

| ì˜µì…˜ | ë°©ë²• | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| 1 | useProductsë¥¼ useCart ë‚´ë¶€ì—ì„œ í˜¸ì¶œ | ê°„ë‹¨ | í›…ì˜ ìˆœí™˜ ì˜ì¡´ì„± ìœ„í—˜ |
| 2 | productsë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ | ëª…ì‹œì  ì˜ì¡´ì„± | í˜¸ì¶œ ì‹œ products í•„ìš” |
| 3 | Contextë¡œ products ê³µìœ  | ì „ì—­ ì ‘ê·¼ | ê¸°ë³¸ê³¼ì œì—ì„œëŠ” ì‚¬ìš© ì•ˆ í•¨ |
| 4 | stock ì²´í¬ë¥¼ Appì—ì„œ ì²˜ë¦¬ | useCartê°€ ìˆœìˆ˜í•´ì§ | ë¡œì§ ë¶„ì‚° |

**ì„ íƒ: ì˜µì…˜ 2 - ì˜ì¡´ì„± ì£¼ì…**
```typescript
export function useCart(products: Product[]) {
  const updateQuantity = (productId, newQuantity) => {
    const product = products.find(p => p.id === productId);
    if (!product) return { success: false, message: "ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." };
    if (newQuantity > product.stock) {
      return { success: false, message: `ì¬ê³ ëŠ” ${product.stock}ê°œê¹Œì§€ë§Œ ìˆìŠµë‹ˆë‹¤.` };
    }
    // ...
  };
}

// App.tsx
const { products } = useProducts();
const { cart, addToCart } = useCart(products);  // products ì£¼ì…
```

### ì´ë¡ ì  ê·¼ê±°

**ì˜ì¡´ì„± ì£¼ì… (Dependency Injection)**:
- ì˜ì¡´í•˜ëŠ” ê²ƒì„ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ìŒ
- í…ŒìŠ¤íŠ¸ ì‹œ mock products ì „ë‹¬ ê°€ëŠ¥
- ì˜ì¡´ì„±ì´ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚¨

**í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ "ì˜ì¡´ì„±ì„ íŒŒë¼ë¯¸í„°ë¡œ"**:
- ì „ì—­ ìƒíƒœ ëŒ€ì‹  íŒŒë¼ë¯¸í„° ì‚¬ìš©
- í•¨ìˆ˜ì˜ ë™ì‘ì´ ì˜ˆì¸¡ ê°€ëŠ¥í•´ì§

### ğŸš¨ ë¬¸ì œ 2: selectedCoupon ê´€ë¦¬

useCouponsì—ì„œ ì´ë™í•´ì˜¨ selectedCoupon ê´€ë ¨ ë¡œì§:

```typescript
export function useCart(products: Product[]) {
  const [cart, setCart] = useState<CartItem[]>(...);
  const [selectedCoupon, setSelectedCoupon] = useState<Coupon | null>(null);

  const applyCoupon = useCallback((coupon: Coupon) => {
    const currentTotal = calculateCartTotal(cart, null).totalAfterDiscount;
    
    if (currentTotal < 10000 && coupon.discountType === "percentage") {
      return { success: false, message: "10,000ì› ì´ìƒ êµ¬ë§¤ ì‹œ ì‚¬ìš© ê°€ëŠ¥" };
    }
    
    setSelectedCoupon(coupon);
    return { success: true, message: "ì¿ í°ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤." };
  }, [cart]);

  const removeCoupon = useCallback(() => {
    setSelectedCoupon(null);
  }, []);

  // totals ê³„ì‚°ê°’ ì œê³µ
  const totals = calculateCartTotal(cart, selectedCoupon);

  return {
    cart,
    selectedCoupon,
    totals,
    applyCoupon,
    removeCoupon,
    // ...
  };
}
```

### ğŸš¨ ë¬¸ì œ 3: App.tsxì—ì„œ setSelectedCoupon ì§ì ‘ ì‚¬ìš©

**ë¬¸ì œ ë°œê²¬**:
```typescript
// App.tsxì˜ ì¿ í° ì„ íƒ ë“œë¡­ë‹¤ìš´
onChange={(e) => {
  const coupon = coupons.find(c => c.code === e.target.value);
  if (coupon) applyCoupon(coupon);
  else setSelectedCoupon(null);  // ğŸš¨ setSelectedCouponì´ ì—†ìŒ!
}}
```

**í•´ê²°**: `removeCoupon` í•¨ìˆ˜ ì¶”ê°€
```typescript
// useCart.ts
const removeCoupon = useCallback(() => {
  setSelectedCoupon(null);
}, []);

// App.tsx
else removeCoupon();  // âœ…
```

### useCart ìµœì¢… ë°˜í™˜ê°’

```typescript
return {
  // ìƒíƒœ
  cart,
  selectedCoupon,
  
  // ê³„ì‚°ê°’
  totalItemCount,
  totals,
  
  // ì•¡ì…˜
  addToCart,
  removeFromCart,
  updateQuantity,
  applyCoupon,
  removeCoupon,
  completeOrder,
};
```

---

## 8. hooks/useNotification.ts - ì•Œë¦¼ í›… ë¶„ë¦¬

### ë¶„ë¥˜: âš¡ ì•¡ì…˜ (Action)

### ëª©í‘œ
ì•Œë¦¼ ê´€ë ¨ **ìƒíƒœì™€ ì•¡ì…˜**ì„ ìº¡ìŠí™”í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í›…ìœ¼ë¡œ ë¶„ë¦¬

### êµ¬í˜„
```typescript
export interface Notification {
  id: string;
  message: string;
  type: "error" | "success" | "warning";
}

export function useNotification(autoHideDuration: number = 3000) {
  const [notifications, setNotifications] = useState<Notification[]>([]);

  const addNotification = useCallback(
    (message: string, type: "error" | "success" | "warning" = "success") => {
      const id = Date.now().toString();
      setNotifications((prev) => [...prev, { id, message, type }]);

      setTimeout(() => {
        setNotifications((prev) => prev.filter((n) => n.id !== id));
      }, autoHideDuration);
    },
    [autoHideDuration]
  );

  const removeNotification = useCallback((id: string) => {
    setNotifications((prev) => prev.filter((n) => n.id !== id));
  }, []);

  return { notifications, addNotification, removeNotification };
}
```

### ê²°ì • í¬ì¸íŠ¸ 1: ë„ë©”ì¸ í›… vs ë²”ìš© í›…

**ì§ˆë¬¸**: useNotificationì€ ì–´ë–¤ ì¢…ë¥˜ì˜ í›…ì¸ê°€?

| í›… ì¢…ë¥˜ | íŠ¹ì§• | ì˜ˆì‹œ |
|---------|------|------|
| **ë„ë©”ì¸ í›…** | íŠ¹ì • ì—”í‹°í‹°ë¥¼ ë‹¤ë£¸, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨ | useCart, useProducts |
| **ë²”ìš© í›…** | ë„ë©”ì¸ê³¼ ë¬´ê´€, ê¸°ìˆ ì  ë¬¸ì œ í•´ê²° | useDebounce, useLocalStorage |
| **UI í›…** | UI ìƒíƒœ ê´€ë¦¬, ì‚¬ìš©ì ê²½í—˜ ê´€ë ¨ | useNotification, useModal |

**ê²°ë¡ **: useNotificationì€ **UI í›…**
- íŠ¹ì • ì—”í‹°í‹°(ìƒí’ˆ, ì¥ë°”êµ¬ë‹ˆ)ë¥¼ ë‹¤ë£¨ì§€ ì•ŠìŒ
- ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±ì„ ë³´ì—¬ì£¼ëŠ” UI ê¸°ëŠ¥
- ì–´ë–¤ ë„ë©”ì¸ì—ì„œë“  ì‚¬ìš© ê°€ëŠ¥

### ê²°ì • í¬ì¸íŠ¸ 2: Notification ì¸í„°í˜ì´ìŠ¤ ìœ„ì¹˜

**Before (App.tsx ë‚´ë¶€)**:
```typescript
// App.tsx
interface Notification {
  id: string;
  message: string;
  type: "error" | "success" | "warning";
}

const App = () => {
  const [notifications, setNotifications] = useState<Notification[]>([]);
  // ...
};
```

**ë¬¸ì œì **:
- ì¸í„°í˜ì´ìŠ¤ê°€ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì— ì •ì˜ë¨
- ë‹¤ë¥¸ ê³³ì—ì„œ Notification íƒ€ì…ì„ ì‚¬ìš©í•˜ë ¤ë©´ import ë¶ˆê°€
- ì•Œë¦¼ ê´€ë ¨ ë¡œì§ì´ Appì— ì§ì ‘ í¬í•¨ë¨

**After (useNotification.ts)**:
```typescript
// hooks/useNotification.ts
export interface Notification {
  id: string;
  message: string;
  type: "error" | "success" | "warning";
}

export function useNotification() {
  // ...
}

// App.tsx
import { useNotification } from "./hooks/useNotification";
```

### ì´ë¡ ì  ê·¼ê±°

**ì‘ì§‘ë„ (Cohesion)**:
- ê´€ë ¨ ìˆëŠ” ê²ƒë“¤ì€ ê°™ì€ ê³³ì— ìœ„ì¹˜
- Notification ì¸í„°í˜ì´ìŠ¤ëŠ” useNotification í›…ê³¼ ë°€ì ‘
- ë”°ë¼ì„œ ê°™ì€ íŒŒì¼ì— ì •ì˜

**ìº¡ìŠí™” (Encapsulation)**:
- ì•Œë¦¼ì˜ ë‚´ë¶€ êµ¬í˜„(setTimeout, ìƒíƒœ ê´€ë¦¬)ì„ ìˆ¨ê¹€
- ì™¸ë¶€ì—ëŠ” `addNotification`, `removeNotification`ë§Œ ë…¸ì¶œ

### ğŸš¨ ë¬¸ì œ 1: setNotifications ì§ì ‘ ì‚¬ìš©

**Before (ë¬¸ì œ)**:
```typescript
// App.tsxì—ì„œ ì•Œë¦¼ ë‹«ê¸° ë²„íŠ¼
<button
  onClick={() =>
    setNotifications((prev) =>  // ğŸš¨ setNotificationsê°€ ì—†ìŒ!
      prev.filter((n) => n.id !== notif.id)
    )
  }
>
  ë‹«ê¸°
</button>
```

**ë¬¸ì œì **:
- useNotificationìœ¼ë¡œ ë¶„ë¦¬ í›„ setNotificationsê°€ Appì—ì„œ ì‚¬ìš© ë¶ˆê°€
- ì§ì ‘ ìƒíƒœ ì¡°ì‘ì€ ìº¡ìŠí™” ìœ„ë°˜

**After (í•´ê²°)**:
```typescript
// useNotification.ts
const removeNotification = useCallback((id: string) => {
  setNotifications((prev) => prev.filter((n) => n.id !== id));
}, []);

return { notifications, addNotification, removeNotification };

// App.tsx
<button onClick={() => removeNotification(notif.id)}>
  ë‹«ê¸°
</button>
```

### ì´ë¡ ì  ê·¼ê±°

**ì¸í„°í˜ì´ìŠ¤ ìµœì†Œí™” ì›ì¹™ (Interface Segregation)**:
- í•„ìš”í•œ ê²ƒë§Œ ë…¸ì¶œ: `addNotification`, `removeNotification`
- ë‚´ë¶€ êµ¬í˜„(`setNotifications`)ì€ ë…¸ì¶œí•˜ì§€ ì•ŠìŒ
- ì‚¬ìš©ìëŠ” "ì–´ë–»ê²Œ" ì•Œë¦¼ì´ ê´€ë¦¬ë˜ëŠ”ì§€ ì•Œ í•„ìš” ì—†ìŒ

### ğŸš¨ ë¬¸ì œ 2: ìë™ ì œê±° ì‹œê°„ í•˜ë“œì½”ë”©

**Before**:
```typescript
const addNotification = useCallback((message, type) => {
  // ...
  setTimeout(() => {
    setNotifications((prev) => prev.filter((n) => n.id !== id));
  }, 3000);  // ğŸš¨ 3000ms í•˜ë“œì½”ë”©
}, []);
```

**ë¬¸ì œì **:
- ìë™ ì œê±° ì‹œê°„ì„ ë³€ê²½í•˜ë ¤ë©´ í›… ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•¨
- ë‹¤ë¥¸ í™”ë©´ì—ì„œ ë‹¤ë¥¸ ì‹œê°„ì„ ì›í•  ìˆ˜ ìˆìŒ

**After (í•´ê²°)**:
```typescript
export function useNotification(autoHideDuration: number = 3000) {
  const addNotification = useCallback((message, type) => {
    // ...
    setTimeout(() => {
      setNotifications((prev) => prev.filter((n) => n.id !== id));
    }, autoHideDuration);  // âœ… íŒŒë¼ë¯¸í„°ë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  }, [autoHideDuration]);
}

// ì‚¬ìš©
const { ... } = useNotification();       // ê¸°ë³¸ 3ì´ˆ
const { ... } = useNotification(5000);   // 5ì´ˆ
```

### ì´ë¡ ì  ê·¼ê±°

**ê°œë°©-íì‡„ ì›ì¹™ (OCP)**:
- í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³ , ìˆ˜ì •ì—ëŠ” ë‹«í˜€ìˆìŒ
- ìë™ ì œê±° ì‹œê°„ ë³€ê²½ ì‹œ í›… ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- íŒŒë¼ë¯¸í„°ë¡œ ì›í•˜ëŠ” ê°’ ì „ë‹¬

**ì˜ì¡´ì„± ì—­ì „ (DIP)**:
- êµ¬ì²´ì ì¸ ê°’(3000)ì´ ì•„ë‹Œ ì¶”ìƒ(autoHideDuration)ì— ì˜ì¡´
- í˜¸ì¶œìê°€ êµ¬ì²´ì ì¸ ê°’ì„ ê²°ì •

### ê²°ì • í¬ì¸íŠ¸ 3: useNotification vs Result íŒ¨í„´

**ë‘ ê°€ì§€ ì ‘ê·¼ ë¹„êµ**:

| ì ‘ê·¼ | ë°©ë²• | ì¥ì  | ë‹¨ì  |
|------|------|------|------|
| **Result íŒ¨í„´** | í›…ì´ result ë°˜í™˜, Appì—ì„œ notification | í›…ì´ UI ë¬´ê´€, í…ŒìŠ¤íŠ¸ ìš©ì´ | Appì—ì„œ ë§¤ë²ˆ notification ì²˜ë¦¬ ì½”ë“œ í•„ìš” |
| **useNotification** | í›…ì—ì„œ ì§ì ‘ notification | í˜¸ì¶œ ì½”ë“œ ê°„ê²° | í›…ì´ UIì— ì˜ì¡´ (ì‹¬í™”ê³¼ì œ) |

**ê¸°ë³¸ê³¼ì œì—ì„œì˜ ì„ íƒ**:
- Context ì—†ì´ êµ¬í˜„í•´ì•¼ í•¨
- useNotificationë„ ë§Œë“¤ì§€ë§Œ, ê° ë„ë©”ì¸ í›…ì€ resultë§Œ ë°˜í™˜
- Appì—ì„œ resultë¥¼ ë°›ì•„ì„œ addNotification í˜¸ì¶œ

```typescript
// ë„ë©”ì¸ í›… (useCart)
const addToCart = (product) => {
  // notification ì§ì ‘ í˜¸ì¶œ ì•ˆ í•¨
  return { success: true, message: "ë‹´ì•˜ìŠµë‹ˆë‹¤" };
};

// App.tsx
const result = addToCart(product);
addNotification(result.message, result.success ? "success" : "error");
```

**ì‹¬í™”ê³¼ì œì—ì„œëŠ”**:
- Contextë¡œ notificationì„ ì „ì—­ ê³µìœ 
- ê° ë„ë©”ì¸ í›…ì—ì„œ ì§ì ‘ addNotification í˜¸ì¶œ ê°€ëŠ¥

```typescript
// ë„ë©”ì¸ í›… (ì‹¬í™”ê³¼ì œ)
export function useCart() {
  const { addNotification } = useNotificationContext();  // Contextì—ì„œ ê°€ì ¸ì˜´
  
  const addToCart = (product) => {
    setCart(...);
    addNotification("ë‹´ì•˜ìŠµë‹ˆë‹¤", "success");  // ì§ì ‘ í˜¸ì¶œ
  };
}
```

### useNotification ìµœì¢… ë°˜í™˜ê°’

```typescript
return {
  // ìƒíƒœ
  notifications,
  
  // ì•¡ì…˜
  addNotification,    // ì•Œë¦¼ ì¶”ê°€ (ìë™ ì œê±° í¬í•¨)
  removeNotification, // ìˆ˜ë™ ì œê±°
  clearNotifications, // ëª¨ë“  ì•Œë¦¼ ì œê±°
};
```

### ì „ì²´ í›… ë¶„ë¥˜ ì •ë¦¬

```
hooks/
â”œâ”€â”€ ë²”ìš© í›… (ê¸°ìˆ ì  ë¬¸ì œ í•´ê²°)
â”‚   â”œâ”€â”€ useDebounce.ts      - ê°’ ë””ë°”ìš´ì‹±
â”‚   â””â”€â”€ useNotification.ts  - UI ì•Œë¦¼ ê´€ë¦¬
â”‚
â””â”€â”€ ë„ë©”ì¸ í›… (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
    â”œâ”€â”€ useProducts.ts      - ìƒí’ˆ CRUD
    â”œâ”€â”€ useCoupons.ts       - ì¿ í° CRUD
    â””â”€â”€ useCart.ts          - ì¥ë°”êµ¬ë‹ˆ + ì¿ í° ì„ íƒ
```

---

## 9. Cross-Cutting Concerns ì²˜ë¦¬

### Notification ë¬¸ì œ

**Cross-Cutting Concernì´ë€?**
- ì—¬ëŸ¬ ëª¨ë“ˆì— ê±¸ì³ í•„ìš”í•œ ê¸°ëŠ¥
- ì˜ˆ: ë¡œê¹…, ì—ëŸ¬ ì²˜ë¦¬, **ì•Œë¦¼**

**ë¬¸ì œ**:
- useProducts, useCoupons, useCart ëª¨ë‘ notification í•„ìš”
- í•˜ì§€ë§Œ ê° í›…ì—ì„œ ì§ì ‘ notificationì„ ì²˜ë¦¬í•˜ë©´ ì˜ì¡´ì„± ë³µì¡

**í•´ê²°: Result íŒ¨í„´ + Appì—ì„œ ì²˜ë¦¬**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        App.tsx                           â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ useProducts  â”‚  â”‚ useCoupons   â”‚  â”‚   useCart    â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ return {     â”‚  â”‚ return {     â”‚  â”‚ return {     â”‚  â”‚
â”‚  â”‚   success,   â”‚  â”‚   success,   â”‚  â”‚   success,   â”‚  â”‚
â”‚  â”‚   message    â”‚  â”‚   message    â”‚  â”‚   message    â”‚  â”‚
â”‚  â”‚ }            â”‚  â”‚ }            â”‚  â”‚ }            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                 â”‚                 â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                           â–¼                             â”‚
â”‚                   addNotification()                     â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹¬í™”ê³¼ì œì—ì„œëŠ”?

**Context ë˜ëŠ” Jotai ì‚¬ìš© ì‹œ**:
```typescript
// NotificationContext ë˜ëŠ” useNotificationAtom
const { addNotification } = useNotification();

// ê° í›…ì—ì„œ ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥
export function useCart() {
  const { addNotification } = useNotification();
  
  const addToCart = (product) => {
    // ...
    addNotification("ë‹´ì•˜ìŠµë‹ˆë‹¤", "success");
  };
}
```

---

## 10. í•µì‹¬ êµí›ˆ

### 1. ìˆœìˆ˜ í•¨ìˆ˜ ì¶”ì¶œì´ ë¨¼ì €

```
ì•¡ì…˜(hook) ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì „ì—,
ê·¸ ì•ˆì—ì„œ ì‚¬ìš©í•  ê³„ì‚°(ìˆœìˆ˜ í•¨ìˆ˜)ì„ ë¨¼ì € models/ì— ë¶„ë¦¬í•˜ë¼.
```

### 2. ì±…ì„ì˜ ê²½ê³„ë¥¼ ëª…í™•íˆ

| ê³„ì¸µ | ì±…ì„ |
|------|------|
| models/ | ìˆœìˆ˜ ê³„ì‚° (í…ŒìŠ¤íŠ¸ ìš©ì´) |
| hooks/ | ìƒíƒœ + ì•¡ì…˜ (ìµœì†Œí•œì˜ ë¶€ì‘ìš©) |
| App | í›… ì¡°í•© + notification ì²˜ë¦¬ |

### 3. ì˜ì¡´ì„±ì€ íŒŒë¼ë¯¸í„°ë¡œ

```typescript
// âŒ ì „ì—­ ìƒíƒœ ì°¸ì¡°
function useCart() {
  const { products } = useProducts();  // í›… ì•ˆì—ì„œ í›… í˜¸ì¶œ
}

// âœ… ì˜ì¡´ì„± ì£¼ì…
function useCart(products: Product[]) {
  // productsë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
}
```

### 4. ìƒíƒœ ì†Œìœ ê¶Œ ê²°ì •

**ì§ˆë¬¸**: ì´ ìƒíƒœëŠ” ì–´ëŠ í›…ì´ "ì†Œìœ "í•´ì•¼ í•˜ëŠ”ê°€?

- `products` â†’ useProducts (ìƒí’ˆ CRUDì˜ ì£¼ì²´)
- `coupons` â†’ useCoupons (ì¿ í° CRUDì˜ ì£¼ì²´)
- `cart` â†’ useCart (ì¥ë°”êµ¬ë‹ˆ ì¡°ì‘ì˜ ì£¼ì²´)
- `selectedCoupon` â†’ useCart (cart ê³„ì‚°ì— í•„ìš”)

### 5. Result íŒ¨í„´ìœ¼ë¡œ ë¶€ì‘ìš© ë¶„ë¦¬

```typescript
// í›…: ê²°ê³¼ë§Œ ë°˜í™˜
const addToCart = (product) => {
  if (noStock) return { success: false, message: "ì¬ê³  ì—†ìŒ" };
  setCart(...);
  return { success: true, message: "ë‹´ì•˜ìŠµë‹ˆë‹¤" };
};

// App: ë¶€ì‘ìš© ì²˜ë¦¬
const result = addToCart(product);
addNotification(result.message, result.success ? "success" : "error");
```

### 6. í›… ë¶„ë¥˜ë¥¼ ëª…í™•íˆ

```
í›…ì˜ ì¢…ë¥˜ë¥¼ íŒŒì•…í•˜ê³  ì ì ˆí•œ ìœ„ì¹˜ì— ë°°ì¹˜í•˜ë¼:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë²”ìš© í›… (ê¸°ìˆ ì  ë¬¸ì œ í•´ê²°)                        â”‚
â”‚   - useDebounce, useLocalStorage               â”‚
â”‚   - ì–´ë–¤ ë„ë©”ì¸ì—ì„œë“  ì‚¬ìš© ê°€ëŠ¥                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ UI í›… (ì‚¬ìš©ì ê²½í—˜)                              â”‚
â”‚   - useNotification, useModal                  â”‚
â”‚   - ì‚¬ìš©ì í”¼ë“œë°±, ì¸í„°ë™ì…˜ ê´€ë¦¬                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ë„ë©”ì¸ í›… (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)                        â”‚
â”‚   - useCart, useProducts, useCoupons           â”‚
â”‚   - íŠ¹ì • ì—”í‹°í‹°ì˜ ìƒíƒœì™€ ì•¡ì…˜ ê´€ë¦¬               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. ìº¡ìŠí™” ì›ì¹™ ì¤€ìˆ˜

```typescript
// âŒ ë‚´ë¶€ êµ¬í˜„ ë…¸ì¶œ
return { notifications, setNotifications };

// âœ… í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë§Œ ë…¸ì¶œ
return { notifications, addNotification, removeNotification };
```

**ì™œ?**:
- ì‚¬ìš©ìëŠ” "ì–´ë–»ê²Œ" êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ì•Œ í•„ìš” ì—†ìŒ
- ë‚´ë¶€ êµ¬í˜„ ë³€ê²½ ì‹œ ì™¸ë¶€ì— ì˜í–¥ ì—†ìŒ
- ì˜ëª»ëœ ì‚¬ìš© ë°©ì§€ (setNotifications ì§ì ‘ í˜¸ì¶œ)

---

## ë‹¤ìŒ í•™ìŠµ ì¶”ì²œ

1. **Grokking Simplicity** (ì±…) - í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì‹¤ì „
2. **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° 3ë¶„ë¥˜** - ë°ì´í„°/ê³„ì‚°/ì•¡ì…˜ ê¹Šì´ ì´í•´
3. **React íŒ¨í„´** - Custom Hook ì„¤ê³„ íŒ¨í„´
4. **ì˜ì¡´ì„± ì£¼ì…** - DI/IoC ê°œë…
5. **Result íŒ¨í„´** - í•¨ìˆ˜í˜• ì—ëŸ¬ ì²˜ë¦¬

