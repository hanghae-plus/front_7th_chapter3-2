# ë°ì´í„°/ê³„ì‚°/ì•¡ì…˜ ë¶„ë¥˜

í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ëª¨ë“  ì½”ë“œë¥¼ **ë°ì´í„°**, **ê³„ì‚°**, **ì•¡ì…˜** ì„¸ ê°€ì§€ë¡œ ë¶„ë¥˜í•œë‹¤.

## 1. ì„¸ ê°€ì§€ ë¶„ë¥˜

### ğŸ“¦ ë°ì´í„° (Data)

- **ì •ì˜**: ì´ë²¤íŠ¸ì— ëŒ€í•œ ì‚¬ì‹¤, ë¶ˆë³€ì˜ ê°’
- **íŠ¹ì§•**: 
  - ê·¸ ìì²´ë¡œëŠ” ì•„ë¬´ê²ƒë„ "í•˜ì§€" ì•ŠìŒ
  - ë³€í•˜ì§€ ì•ŠëŠ” ê°’
  - ì–¸ì œ ì½ì–´ë„ ê°™ì€ ê°’

```typescript
// constants/index.ts
export const initialProducts = [...];  // ë¶ˆë³€ì˜ ê°’
export const initialCoupons = [...];   // ì´ë²¤íŠ¸ë‚˜ ì‚¬ì‹¤ì˜ ê¸°ë¡
```

### ğŸ§® ê³„ì‚° (Calculation)

- **ì •ì˜**: ì…ë ¥ìœ¼ë¡œ ì¶œë ¥ì„ ê³„ì‚°í•˜ëŠ” ìˆœìˆ˜í•¨ìˆ˜
- **íŠ¹ì§•**:
  - ê°™ì€ ì…ë ¥ â†’ í•­ìƒ ê°™ì€ ì¶œë ¥
  - ì™¸ë¶€ ì„¸ê³„ì— ì˜í–¥ ì—†ìŒ
  - ì–¸ì œ, ëª‡ ë²ˆ í˜¸ì¶œí•´ë„ ê²°ê³¼ ë™ì¼
  - **í…ŒìŠ¤íŠ¸í•˜ê¸° ê°€ì¥ ì‰¬ì›€**

```typescript
// models/cart.ts
export const calculateCartTotal = (cart, selectedCoupon) => {
  // ì…ë ¥ë§Œìœ¼ë¡œ ì¶œë ¥ ê²°ì •, ì™¸ë¶€ ìƒíƒœ ì½ê¸°/ì“°ê¸° ì—†ìŒ
  return { totalBeforeDiscount, totalAfterDiscount, totalDiscount };
};

// utils/formatter.ts  
export const formatPrice = (price: number): string => {
  return `â‚©${price.toLocaleString()}`;  // ê°™ì€ ì…ë ¥ â†’ í•­ìƒ ê°™ì€ ì¶œë ¥
};
```

### âš¡ ì•¡ì…˜ (Action)

- **ì •ì˜**: ì™¸ë¶€ ì„¸ê³„ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì½”ë“œ
- **íŠ¹ì§•**:
  - í˜¸ì¶œ ì‹œì ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
  - ì™¸ë¶€ ì„¸ê³„ì™€ ìƒí˜¸ì‘ìš© (localStorage, API, DOM, ì‹œê°„)
  - **í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€** â†’ ê·¸ë˜ì„œ ìµœì†Œí™”í•´ì•¼ í•¨

```typescript
// hooks/useProducts.ts
export const useProducts = () => {
  const [products, setProducts] = useState(...);  // âš¡ ìƒíƒœ ë³€ê²½
  
  useEffect(() => {
    localStorage.setItem(...);  // âš¡ ì™¸ë¶€ ì €ì¥ì†Œ ì“°ê¸°
  }, [products]);
  
  return { products, addProduct, ... };
};

// hooks/useDebounce.ts
export const useDebounce = (value, delay) => {
  useEffect(() => {
    const timer = setTimeout(...);  // âš¡ ì‹œê°„ ì˜ì¡´
    return () => clearTimeout(timer);
  }, [value, delay]);
};
```

## 2. í”„ë¡œì íŠ¸ íŒŒì¼ë³„ ë¶„ë¥˜

| íŒŒì¼ | ë¶„ë¥˜ | ì´ìœ  |
|------|------|------|
| `constants/index.ts` | ğŸ“¦ ë°ì´í„° | ë¶ˆë³€ì˜ ê°’ (initialProducts, initialCoupons) |
| `models/cart.ts` | ğŸ§® ê³„ì‚° | ìˆœìˆ˜í•¨ìˆ˜ë§Œ (ì…ë ¥â†’ì¶œë ¥, ë¶€ì‘ìš© ì—†ìŒ) |
| `utils/formatter.ts` | ğŸ§® ê³„ì‚° | ìˆœìˆ˜í•¨ìˆ˜ë§Œ (formatPrice ë“±) |
| `hooks/useDebounce.ts` | âš¡ ì•¡ì…˜ | useEffect + setTimeout (ì‹œê°„ ì˜ì¡´) |
| `hooks/useProducts.ts` | âš¡ ì•¡ì…˜ | useState + localStorage (ì™¸ë¶€ ìƒíƒœ ë³€ê²½) |

## 3. ë¶„ë¥˜ë³„ íŠ¹ì„± ë¹„êµ

| ë¶„ë¥˜ | í…ŒìŠ¤íŠ¸ ë‚œì´ë„ | ì¬ì‚¬ìš©ì„± | ë²„ê·¸ ê°€ëŠ¥ì„± |
|------|-------------|---------|-----------|
| ğŸ“¦ ë°ì´í„° | í…ŒìŠ¤íŠ¸ ë¶ˆí•„ìš” | ìµœê³  | ê±°ì˜ ì—†ìŒ |
| ğŸ§® ê³„ì‚° | ë§¤ìš° ì‰¬ì›€ | ë†’ìŒ | ë‚®ìŒ |
| âš¡ ì•¡ì…˜ | ì–´ë ¤ì›€ | ë‚®ìŒ | ë†’ìŒ |

## 4. í•µì‹¬ ì„¤ê³„ ì›ì¹™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì¢‹ì€ ì„¤ê³„ì˜ ëª©í‘œ                          â”‚
â”‚                                                             â”‚
â”‚   ì•¡ì…˜(Action)ì„ ìµœì†Œí™”í•˜ê³ ,                                 â”‚
â”‚   ê°€ëŠ¥í•œ ë§ì€ ë¡œì§ì„ ê³„ì‚°(Calculation)ìœ¼ë¡œ ì˜®ê¸´ë‹¤             â”‚
â”‚                                                             â”‚
â”‚   ì™œ? â†’ ê³„ì‚°ì€ í…ŒìŠ¤íŠ¸/ì¬ì‚¬ìš©/ì´í•´ê°€ ì‰¬ìš°ë‹ˆê¹Œ!                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5. ë¦¬íŒ©í† ë§ ì „í›„ ë¹„êµ

### Before (App.tsx ëª¨ë†€ë¦¬ì‹)

```
App.tsx = ğŸ“¦ + ğŸ§® + âš¡ ì „ë¶€ ì„ì—¬ìˆìŒ
```

### After (ë¶„ë¦¬ëœ êµ¬ì¡°)

```
constants/     â†’ ğŸ“¦ ë°ì´í„°ë§Œ
models/        â†’ ğŸ§® ê³„ì‚°ë§Œ  â† í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ì›€!
utils/         â†’ ğŸ§® ê³„ì‚°ë§Œ  â† í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ì›€!
hooks/         â†’ âš¡ ì•¡ì…˜    â† ìµœì†Œí•œì˜ ìƒíƒœ+ë¶€ì‘ìš©ë§Œ
components/    â†’ âš¡ ì•¡ì…˜    â† ë Œë”ë§(DOM ì¡°ì‘ë„ ì•¡ì…˜)
```

## 6. ì‹¤ì „ ì ìš© ê°€ì´ë“œ

ì•¡ì…˜ ë‚´ë¶€ì— ê³„ì‚°ì´ ìˆ¨ì–´ìˆë‹¤ë©´ ì¶”ì¶œí•˜ë¼:

```typescript
// âŒ Before: ì•¡ì…˜ ì•ˆì— ê³„ì‚°ì´ ì„ì—¬ìˆìŒ
const addToCart = (product) => {
  const discount = Math.max(...product.discounts.map(d => d.rate));  // ê³„ì‚°
  const newItem = { ...product, appliedDiscount: discount };         // ê³„ì‚°
  setCart(prev => [...prev, newItem]);                               // ì•¡ì…˜
};

// âœ… After: ê³„ì‚°ì„ ë¶„ë¦¬
// models/cart.ts
export const getMaxDiscount = (discounts) => 
  Math.max(...discounts.map(d => d.rate));

export const createCartItem = (product) => ({
  ...product,
  appliedDiscount: getMaxDiscount(product.discounts)
});

// hooks/useCart.ts (ì•¡ì…˜ë§Œ ë‚¨ìŒ)
const addToCart = (product) => {
  const newItem = createCartItem(product);  // ê³„ì‚° í˜¸ì¶œ
  setCart(prev => [...prev, newItem]);      // ì•¡ì…˜
};
```

ì´ë ‡ê²Œ ë¶„ë¦¬í•˜ë©´ `getMaxDiscount`ì™€ `createCartItem`ì€ React ì—†ì´ë„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥!

